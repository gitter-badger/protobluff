<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A modular Protocol Buffers implementation for C">
      
      
        <link rel="canonical" href="http://squidfunk.github.io/protobluff/guide/scalar-types/">
      
      
        <meta name="author" content="Martin Donath">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.0">
    
    
      
        <title>Scalar types - protobluff</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-dadbf8711d.js"></script>
    
    
      
  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
  <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <link rel="stylesheet" href="https://file.myfontastic.com/n6vo44Re5QaWo8oCKShBs7/icons.css">

    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-368e2db2e3.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-0352baa348.palette.css">
      
      
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="indigo" data-md-color-accent="teal">
  
    <div class="md-svg">
  
  
    <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
  
</div>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="protobluff" class="md-icon md-header-nav__icon md-header-nav__icon--home">
          
            <img src="../../images/protobluff.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-header-nav__icon md-header-nav__icon--menu" for="drawer">
          menu
        </label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Developer guide
                </span>
              
            
            Scalar types
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-header-nav__icon md-header-nav__icon--search" for="search">
            search
          </label>
          <div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <div class="md-header-nav__source">
              

  

<a href="https://github.com/squidfunk/protobluff" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    squidfunk/protobluff
  </div>
</a>
            </div>
          
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class="md-icon md-nav__icon">
      
        <img src="../../images/protobluff.svg">
      
    </i>
    protobluff
  </label>
  
    <div class="md-nav__source">
      

  

<a href="https://github.com/squidfunk/protobluff" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    squidfunk/protobluff
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href="../.." title="About" class="md-nav__link">
        About
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../getting-started/" title="Getting started" class="md-nav__link">
        Getting started
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../design-rationale/" title="Design rationale" class="md-nav__link">
        Design rationale
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../similar-projects/" title="Similar projects" class="md-nav__link">
        Similar projects
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Developer guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Developer guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../runtimes/" title="Choosing a runtime" class="md-nav__link">
        Choosing a runtime
      </a>
    
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../buffers-and-journals/" title="Buffers and journals" class="md-nav__link">
        Buffers and journals
      </a>
    
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../messages/" title="Working with messages" class="md-nav__link">
        Working with messages
      </a>
    
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    <label class="md-nav__link md-nav__link--active" for="toc">
      Scalar types
    </label>
    <a href="./" title="Scalar types" class="md-nav__link md-nav__link--active">
      Scalar types
    </a>
    <nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-mappings" title="Type mappings" class="md-nav__link">
    Type mappings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings-and-byte-arrays" title="Strings and byte arrays" class="md-nav__link">
    Strings and byte arrays
  </a>
  
</li>
      
    </ul>
  
</nav>
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../repeated-fields/" title="Repeated fields" class="md-nav__link">
        Repeated fields
      </a>
    
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../error-handling/" title="Error handling" class="md-nav__link">
        Error handling
      </a>
    
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../allocators/" title="Custom allocators" class="md-nav__link">
        Custom allocators
      </a>
    
  </li>

          
        
          
          
          
  <li class="md-nav__item">
    
      <a href="../miscellaneous/" title="Miscellaneous" class="md-nav__link">
        Miscellaneous
      </a>
    
  </li>

          
        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-mappings" title="Type mappings" class="md-nav__link">
    Type mappings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings-and-byte-arrays" title="Strings and byte arrays" class="md-nav__link">
    Strings and byte arrays
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
              
                
                  <h1>Scalar types</h1>
                
                <h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The Protocol Buffers specification defines a multitude of signed and unsigned
integer types (each with different implications for the underlying wire
representation), as well as types for the representation of floating point
numbers, booleans, bytes and strings.</p>
<h2 id="type-mappings">Type mappings<a class="headerlink" href="#type-mappings" title="Permanent link">&para;</a></h2>
<p>The following table shows the type mappings from C types (both native and
custom types like <code>pb_string_t</code>) to Protocol Buffer schema types:</p>
<table>
<thead>
<tr>
<th>Native type</th>
<th>Schema type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int32_t</code></td>
<td><code>int32</code>, <code>sint32</code>, <code>fixed32</code></td>
</tr>
<tr>
<td><code>int64_t</code></td>
<td><code>int64</code>, <code>sint64</code>, <code>fixed64</code></td>
</tr>
<tr>
<td><code>uint8_t</code></td>
<td><code>bool</code></td>
</tr>
<tr>
<td><code>uint32_t</code></td>
<td><code>uint32</code>, <code>fixed32</code></td>
</tr>
<tr>
<td><code>uint64_t</code></td>
<td><code>uint64</code>, <code>fixed64</code></td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>double</code></td>
<td><code>double</code></td>
</tr>
<tr>
<td><code>pb_enum_t</code></td>
<td><code>enum</code></td>
</tr>
<tr>
<td><code>pb_string_t</code></td>
<td><code>bytes</code>, <code>string</code></td>
</tr>
</tbody>
</table>
<p>See the <a href="https://developers.google.com/protocol-buffers/docs/proto?hl=en#scalar">Protocol Buffers specification</a> for more information on types.</p>
<h2 id="strings-and-byte-arrays">Strings and byte arrays<a class="headerlink" href="#strings-and-byte-arrays" title="Permanent link">&para;</a></h2>
<p>While the mappings of integer and floating point types should be quite
self-explanatory, strings are worth discussing: in wire representation, strings
and byte arrays are stored as a length-prefixed, unterminated list of unsigned
chars. Because there's no nul-terminator, the length needs to be explicitly
returned. This is what the datatype <code>pb_string_t</code> is for. The header file
<code>core/string.h</code> defines a few useful functions for working with strings:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/* Initialize a string with explicit length */</span>
<span class="n">pb_string_t</span> <span class="n">string</span> <span class="o">=</span> <span class="n">pb_string_init</span><span class="p">(</span><span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

<span class="cm">/* Initialize a string from a nul-terminated array of unsigned chars */</span>
<span class="n">pb_string_t</span> <span class="n">string</span> <span class="o">=</span> <span class="n">pb_string_init_from_chars</span><span class="p">(</span><span class="s">&quot;TEST&quot;</span><span class="p">);</span>

<span class="cm">/* Initialize an empty string - may be useful at times */</span>
<span class="n">pb_string_t</span> <span class="n">string</span> <span class="o">=</span> <span class="n">pb_string_init_empty</span><span class="p">();</span>

<span class="cm">/* Retrieve the underlying data and size of a string */</span>
<span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="n">pb_string_data</span><span class="p">(</span><span class="o">&amp;</span><span class="n">string</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">size_t</span>   <span class="n">size</span> <span class="o">=</span> <span class="n">pb_string_size</span><span class="p">(</span><span class="o">&amp;</span><span class="n">string</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p>Strings are always allocated on the stack and do not take ownership of the
provided array of unsigned chars, so there's no need for freeing them, but the
caller must ensure that the array is not freed during operations.</p>
              
            </article>
          </div>
        </div>
      </main>
      
        <footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../messages/" title="Working with messages" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-footer-nav__icon">arrow_back</i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Working with messages
              </span>
            </div>
          </a>
        
        
          <a href="../repeated-fields/" title="Repeated fields" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Repeated fields
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-footer-nav__icon">arrow_forward</i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <span class="md-footer-copyright__highlight">
            Copyright &copy; 2013-2016 Martin Donath
          </span>
          <br>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        <div class="md-footer-social">
          
            <a href="https://github.com/squidfunk" class="md-footer-social__link socicon-github"></a>
          
            <a href="https://twitter.com/squidfunk" class="md-footer-social__link socicon-twitter"></a>
          
            <a href="https://de.linkedin.com/in/martin-donath-20a95039" class="md-footer-social__link socicon-linkedin"></a>
          
        </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      <script src="../../assets/javascripts/application-2442e71194.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-72704849-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>